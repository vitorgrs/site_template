{% if include.lookup %}
  {% assign publicacoes = site.data.publicacoess
    | where_exp: "publicacoes",
      "publicacoes.id == include.lookup or publicacoes.title contains include.lookup"
    | first
  %}
{% else %}
  {% assign publicacoes = include %}
{% endif %}
<div class="cardpublicacao">
  <a
      {% if publicacoes.link %}
        href="{{ publicacoes.link | relative_url }}"
      {% endif %}
      class="cardpublicacao-link"
  >   
      {% if include.style == "rich" %}
        <img class="cardpublicacao-imagem"
          src="{{ publicacoes.image | relative_url }}"
          alt="{{ publicacoes.title | default: "publicacoes image" }}"
        >
      {% endif %}

      <div class="cardpublicacao-texto">
        {% assign type = site.data.types[publicacoes.type] %}
        {% include icon.html icon=type.icon %}

        {{ publicacoes.title | default: "[no title info]" }}
    
        <div
          class="cardpublicacao-autores"
          {% if publicacoes.authors.size > 10 %}
            data-tooltip="{{ publicacoes.authors | join: ", " }} "
          {% endif %}
          tabindex="0"
        >
          {{
            publicacoes.authors
            | join: ","
            | split: ","
            | array_carve: 5
            | join: ", "
            | markdownify
            | remove: "<p>" | remove: "</p>"
            | default: "[no author info]"
          }}
        </div>

        <div class="cardpublicacao-detalhes">
          <span class="cardpublicacao-publicadoem">
            {{- publicacoes.publisher | default: "[no publisher info]" -}}
          </span>
          &nbsp;·&nbsp;
          <span class="cardpublicacao-data">
            {{- publicacoes.date | default: "[no date info]" | date: "%d %b %Y" -}}
          </span>
          &nbsp;·&nbsp;
          <span class="cardpublicacao-doi">
            {{- publicacoes.id | default: "[no id info]" -}}
          </span>
        </div>

        {% if include.style == "rich" %}
          {% if publicacoes.description %}
            <div class="cardpublicacao-descricao">
              {{
                publicacoes.description
                | markdownify
                | remove: "<p>"
                | remove: "</p>"
              }}
            </div>
          {% endif %}

          {% if publicacoes.buttons.size > 0 %}
            <div class="cardpublicacao-buttons">
              {% for button in publicacoes.buttons %}
                {%
                  include button.html
                  type=button.type
                  icon=button.icon
                  text=button.text
                  link=button.link
                  style="bare"
                %}
              {% endfor %}
            </div>
          {% endif %}

          {% if publicacoes.tags.size > 0 or publicacoes.repo %}
            {% include tags.html tags=publicacoes.tags repo=publicacoes.repo %}
          {% endif %}
        {% endif %}
      </div>
  </a>
</div>
